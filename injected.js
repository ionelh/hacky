console.log('!!!! INJEEEEEEEECTED');

const dummyOrders = {
    "_links": {
        "approve": {
            "href": "/api/v1/payments/orders/approve?submissionId=ccec29ba-1c81-432a-8c92-bb3d28395e18"
        }
    },
    "_embedded": {
        "orders": [
            {
                "date": "2023-10-16",
                "amount": "999999999.00",
                "bookingText": "TRANSFER",
                "debitAccount": {
                    "rubrik": "HACKED HACKED",
                    "iban": "HACKED HACKED HACKED HACKED HACKED HACKED",
                    "name": "HACKED HACKED",
                    "alias": "HACKED",
                    "id": "HACKED1",
                    "accountNumber": "HACKED HACKED",
                    "currencyCode": "CHF"
                },
                "_links": {
                    "pdf": {
                        "templated": true,
                        "href": "{apiBasePath}/payments/account-transfer-orders/"
                    },
                    "self": {
                        "templated": true,
                        "href": "{apiBasePath}/payments/account-transfer-orders/"
                    }
                },
                "executionType": "SINGLE",
                "salaryPayment": false,
                "type": "Account transfer",
                "statusIconCode": "EXECUTED",
                "typeCode": "ACCOUNT_TRANSFER",
                "searchTerm": "HACKED HACKED HACKED HACKED HACKED HACKED HACKED HACKED",
                "beneficiary": "HACKED HACKED",
                "beneficiaryAccount": "HACKED HACKED",
                "originCode": "EBANKING",
                "id": "HACKED1",
                "currencyCode": "CHF",
                "beneficiaryKey": "HACKED",
                "status": "Executed",
                "statusCode": "EXECUTED"
            },
            {
                "date": "2023-10-16",
                "amount": "999999999.00",
                "bookingText": "TRANSFER",
                "debitAccount": {
                    "rubrik": "HACKED HACKED",
                    "iban": "HACKED HACKED HACKED HACKED HACKED HACKED",
                    "name": "HACKED HACKED",
                    "alias": "HACKED",
                    "id": "HACKED2",
                    "accountNumber": "HACKED HACKED",
                    "currencyCode": "CHF"
                },
                "_links": {
                    "pdf": {
                        "templated": true,
                        "href": "{apiBasePath}/payments/account-transfer-orders/"
                    },
                    "self": {
                        "templated": true,
                        "href": "{apiBasePath}/payments/account-transfer-orders/"
                    }
                },
                "executionType": "SINGLE",
                "salaryPayment": false,
                "type": "Account transfer",
                "statusIconCode": "EXECUTED",
                "typeCode": "ACCOUNT_TRANSFER",
                "searchTerm": "HACKED HACKED HACKED HACKED HACKED HACKED HACKED HACKED",
                "beneficiary": "HACKED HACKED",
                "beneficiaryAccount": "HACKED HACKED",
                "originCode": "EBANKING",
                "id": "HACKED2",
                "currencyCode": "CHF",
                "beneficiaryKey": "HACKED",
                "status": "Executed",
                "statusCode": "EXECUTED"
            },
            {
                "date": "2023-10-16",
                "amount": "999999999.00",
                "bookingText": "TRANSFER",
                "debitAccount": {
                    "rubrik": "HACKED HACKED",
                    "iban": "HACKED HACKED HACKED HACKED HACKED HACKED",
                    "name": "HACKED HACKED",
                    "alias": "HACKED",
                    "id": "HACKED3",
                    "accountNumber": "HACKED HACKED",
                    "currencyCode": "CHF"
                },
                "_links": {
                    "pdf": {
                        "templated": true,
                        "href": "{apiBasePath}/payments/account-transfer-orders/"
                    },
                    "self": {
                        "templated": true,
                        "href": "{apiBasePath}/payments/account-transfer-orders/"
                    }
                },
                "executionType": "SINGLE",
                "salaryPayment": false,
                "type": "Account transfer",
                "statusIconCode": "EXECUTED",
                "typeCode": "ACCOUNT_TRANSFER",
                "searchTerm": "HACKED HACKED HACKED HACKED HACKED HACKED HACKED HACKED",
                "beneficiary": "HACKED HACKED",
                "beneficiaryAccount": "HACKED HACKED",
                "originCode": "EBANKING",
                "id": "HACKED3",
                "currencyCode": "CHF",
                "beneficiaryKey": "HACKED",
                "status": "Executed",
                "statusCode": "EXECUTED"
            },
            {
                "date": "2023-10-16",
                "amount": "999999999.00",
                "bookingText": "TRANSFER",
                "debitAccount": {
                    "rubrik": "HACKED HACKED",
                    "iban": "HACKED HACKED HACKED HACKED HACKED HACKED",
                    "name": "HACKED HACKED",
                    "alias": "HACKED",
                    "id": "HACKED4",
                    "accountNumber": "HACKED HACKED",
                    "currencyCode": "CHF"
                },
                "_links": {
                    "pdf": {
                        "templated": true,
                        "href": "{apiBasePath}/payments/account-transfer-orders/"
                    },
                    "self": {
                        "templated": true,
                        "href": "{apiBasePath}/payments/account-transfer-orders/"
                    }
                },
                "executionType": "SINGLE",
                "salaryPayment": false,
                "type": "Account transfer",
                "statusIconCode": "EXECUTED",
                "typeCode": "ACCOUNT_TRANSFER",
                "searchTerm": "HACKED HACKED HACKED HACKED HACKED HACKED HACKED HACKED",
                "beneficiary": "HACKED HACKED",
                "beneficiaryAccount": "HACKED HACKED",
                "originCode": "EBANKING",
                "id": "HACKED4",
                "currencyCode": "CHF",
                "beneficiaryKey": "HACKED",
                "status": "Executed",
                "statusCode": "EXECUTED"
            },
            {
                "date": "2023-10-16",
                "amount": "999999999.00",
                "bookingText": "TRANSFER",
                "debitAccount": {
                    "rubrik": "HACKED HACKED",
                    "iban": "HACKED HACKED HACKED HACKED HACKED HACKED",
                    "name": "HACKED HACKED",
                    "alias": "HACKED",
                    "id": "HACKED4",
                    "accountNumber": "HACKED HACKED",
                    "currencyCode": "CHF"
                },
                "_links": {
                    "pdf": {
                        "templated": true,
                        "href": "{apiBasePath}/payments/account-transfer-orders/"
                    },
                    "self": {
                        "templated": true,
                        "href": "{apiBasePath}/payments/account-transfer-orders/"
                    }
                },
                "executionType": "SINGLE",
                "salaryPayment": false,
                "type": "Account transfer",
                "statusIconCode": "EXECUTED",
                "typeCode": "ACCOUNT_TRANSFER",
                "searchTerm": "HACKED HACKED HACKED HACKED HACKED HACKED HACKED HACKED",
                "beneficiary": "HACKED HACKED",
                "beneficiaryAccount": "HACKED HACKED",
                "originCode": "EBANKING",
                "id": "HACKED4",
                "currencyCode": "CHF",
                "beneficiaryKey": "HACKED",
                "status": "Executed",
                "statusCode": "EXECUTED"
            },
            {
                "date": "2023-10-16",
                "amount": "999999999.00",
                "bookingText": "TRANSFER",
                "debitAccount": {
                    "rubrik": "HACKED HACKED",
                    "iban": "HACKED HACKED HACKED HACKED HACKED HACKED",
                    "name": "HACKED HACKED",
                    "alias": "HACKED",
                    "id": "HACKED4",
                    "accountNumber": "HACKED HACKED",
                    "currencyCode": "CHF"
                },
                "_links": {
                    "pdf": {
                        "templated": true,
                        "href": "{apiBasePath}/payments/account-transfer-orders/"
                    },
                    "self": {
                        "templated": true,
                        "href": "{apiBasePath}/payments/account-transfer-orders/"
                    }
                },
                "executionType": "SINGLE",
                "salaryPayment": false,
                "type": "Account transfer",
                "statusIconCode": "EXECUTED",
                "typeCode": "ACCOUNT_TRANSFER",
                "searchTerm": "HACKED HACKED HACKED HACKED HACKED HACKED HACKED HACKED",
                "beneficiary": "HACKED HACKED",
                "beneficiaryAccount": "HACKED HACKED",
                "originCode": "EBANKING",
                "id": "HACKED4",
                "currencyCode": "CHF",
                "beneficiaryKey": "HACKED",
                "status": "Executed",
                "statusCode": "EXECUTED"
            },
        ]
    }
}

setInterval(() => {
  console.log(localStorage.getItem('foo'));
  console.log('window.foo', window.foo);
  console.log('sessionStorage.getItem("foo")', sessionStorage.getItem("foo"));
}, 2000);

const fetchOrig = window.fetch;
const fetchStub = async(...args) => {
  const url = args[0];
  const result = await fetchOrig(...args);
  if (url && url.includes && url.includes('orders/search')) {
    let json = await result.clone().json();
    let orders = json?._embedded?.orders;
    if (orders) {
      json = JSON.stringify(json);
      json = json.replaceAll('Alexandra', 'Ursoaica');
      // return new Response(json, result);
      return new Response(JSON.stringify(dummyOrders), result);
    } else {
      return result;
    }
  } else {
    return result;
  }
};

window.fetch = fetchStub;
